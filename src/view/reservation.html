<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
    <meta charset="UTF-8">
    <title>客房预订</title>
    <link rel="stylesheet" href="../public/jquery-weui/1.0/weui.min.css">
    <link rel="stylesheet" href="../public/jquery-weui/1.0/jquery-weui.min.css">
    <link rel="stylesheet" href="../public/css/swiper-3.3.1.min.css">
    <link rel="stylesheet" href="../css/reservation.min.css">
</head>
<body>
<div class="main">
    <div class="t-nav">
        <a href="javascript:;" @click="funcBack" class="left"><i class="iconfont icon-left"></i></a>
        <div class="title">客房预订</div>
        <div class="right" v-if="status==1" @click="addPostcard">{{ (status==1)?('完成'):('') }}</div>
    </div>

    <div class="swiper-container barn">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <img src="../images/img.jpg?oss_image_style=1024w_480h_4e_250-248-236bgc" alt="">
            </div>
            <div class="swiper-slide">
                <img src="../images/img.jpg?oss_image_style=1024w_480h_4e_250-248-236bgc" alt="">
            </div>
        </div>
        <div class="swiper-pagination"></div>
    </div>
    <div class="weui-panel weui-panel_access trip-cells_form">
        <div class="weui-panel__hd">客房情况</div>
        <div class="weui-panel__bd">
            <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" v-for="(item,i) in 3">
                <div class="weui-media-box__hd">
                    <img class="weui-media-box__thumb" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAeFBMVEUAwAD///+U5ZTc9twOww7G8MYwzDCH4YcfyR9x23Hw+/DY9dhm2WZG0kbT9NP0/PTL8sux7LFe115T1VM+zz7i+OIXxhes6qxr2mvA8MCe6J6M4oz6/frr+us5zjn2/fa67rqB4IF13XWn6ad83nxa1loqyirn+eccHxx4AAAC/klEQVRo3u2W2ZKiQBBF8wpCNSCyLwri7v//4bRIFVXoTBBB+DAReV5sG6lTXDITiGEYhmEYhmEYhmEYhmEY5v9i5fsZGRx9PyGDne8f6K9cfd+mKXe1yNG/0CcqYE86AkBMBh66f20deBc7wA/1WFiTwvSEpBMA2JJOBsSLxe/4QEEaJRrASP8EVF8Q74GbmevKg0saa0B8QbwBdjRyADYxIhqxAZ++IKYtciPXLQVG+imw+oo4Bu56rjEJ4GYsvPmKOAB+xlz7L5aevqUXuePWVhvWJ4eWiwUQ67mK51qPj4dFDMlRLBZTqF3SDvmr4BwtkECu5gHWPkmDfQh02WLxXuvbvC8ku8F57GsI5e0CmUwLz1kq3kD17R1In5816rGvQ5VMk5FEtIiWislTffuDpl/k/PzscdQsv8r9qWq4LRWX6tQYtTxvI3XyrwdyQxChXioOngH3dLgOFjk0all56XRi/wDFQrGQU3Os5t0wJu1GNtNKHdPqYaGYQuRDfbfDf26AGLYSyGS3ZAK4S8XuoAlxGSdYMKwqZKM9XJMtyqXi7HX/CiAZS6d8bSVUz5J36mEMFDTlAFQzxOT1dzLRljjB6+++ejFqka+mXIe6F59mw22OuOw1F4T6lg/9VjL1rLDoI9Xzl1MSYDNHnPQnt3D1EE7PrXjye/3pVpr1Z45hMUdcACc5NVQI0bOdS1WA0wuz73e7/5TNqBPhQXPEFGJNV2zNqWI7QKBd2Gn6AiBko02zuAOXeWIXjV0jNqdKegaE/kJQ6Bfs4aju04lMLkA2T5wBSYPKDGF3RKhFYEa6A1L1LG2yacmsaZ6YPOSAMKNsO+N5dNTfkc5Aqe26uxHpx7ZirvgCwJpWq/lmX1hA7LyabQ34tt5RiJKXSwQ+0KU0V5xg+hZrd4Bn1n4EID+WkQdgLfRNtvil9SPfwy+WQ7PFBWQz6dGWZBLkeJFXZGCfLUjCgGgqXo5TuSu3cugdcTv/HjqnBTEMwzAMwzAMwzAMwzAMw/zf/AFbXiOA6frlMAAAAABJRU5ErkJggg==" alt="">
                </div>
                <div class="weui-media-box__bd">
                    <h4 class="weui-media-box__title">男生多人间床位</h4>
                    <p class="weui-media-box__desc">
                        <span>会员：¥100</span>
                        <span>非会员：¥110</span>
                    </p>
                    <p class="weui-media-box__desc">
                        <span>-----</span>
                        <span>充足</span>
                    </p>
                </div>
                <div class="book">预订</div>
            </a>
        </div>
        <!--<div class="weui-panel__ft">
            <a href="javascript:void(0);" class="weui-cell weui-cell_access weui-cell_link">
                <div class="weui-cell__bd">查看更多</div>
                <span class="weui-cell__ft"></span>
            </a>
        </div>-->
    </div>

    <div class="weui-loadmore weui-loadmore_line">
        <span class="weui-loadmore__tips">壹束光青年旅舍</span>
    </div>
</div>
</body>
<script type="text/javascript" src="../public/js/jquery-2.1.4.js"></script>
<script type="text/javascript" src="../public/js/swiper-3.3.1.jquery.min.js"></script>
<script type="text/javascript" src="../public/js/vue.min.js"></script>
<script type="text/javascript" src="../public/jquery-weui/1.0/jquery-weui.min.js"></script>

<script>
    jQuery(function ($) {
        $(".barn").swiper({
            loop: true,
            autoplay: 2000,//可选选项，自动滑动
            pagination: '.swiper-pagination',// 分页
            autoHeight: true, //高度随内容变化
            autoplayDisableOnInteraction: false// 点击后继续滑动
        });
    });

    Vue.config.devtools = true;
    new Vue({
        el: '.main',
        data: {
            status: 0,// 状态【0:显示已有明信片列表，1：添加明信片】
            edit: {
                status: false,
                index: 0
            },
            postcard: {
                postcodes: '',
                addressee: '',
                comment: '',
                adders: ''
            },
            postcardItems: []
        },
        created: function () {

        },
        methods: {
            funcBack: function () {
                (this.status == 1) ? this.status = 0 : window.history.back();
            },
            addPostcard: function () {// 申请明信片
                var temp = this.postcard, edit = this.edit;
                temp.postcodes = temp.postcodes.toString();

                if (temp.comment && temp.addressee && temp.adders) {
                    if (temp.postcodes.length == 6) {
                        if (edit.status) {
                            edit.status = false;
                            this.postcardItems[edit.index] = temp;
                        } else {
                            this.postcardItems.push(temp);
                        }

                        var clearData = {};
                        $.each(temp, function (v, i) {
                            clearData[v] = '';
                        });
                        this.postcard = clearData;

                        this.status = 0;
                    } else
                        $.alert('邮编号码不正确哦');
                } else
                    $.alert('信息未填写完整哦');
            },
            editPostcard: function (item, i) {// 编辑现有明信片
                this.edit = {
                    status: true,
                    index: i
                };
                this.postcard = item;
                this.status = 1;
            }
        }
    });
</script>
</html>