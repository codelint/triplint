<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
    <title>旅行者申请</title>
    <link rel="stylesheet" href="../public/css/font_h5xvumt53vwsif6r.css">
    <link rel="stylesheet" href="../public/css/weui.css">
    <link rel="stylesheet" href="../css/login.min.css">
</head>
<body>
<div class="t-nav">
    <a style="display: none" href="javascript:window.history.back();" class="left on-menu goback"><i
            class="iconfont icon-left"></i></a>

    <div class="title">旅行者申请</div>
</div>

<div class="main main-login">
    <div class="login-box">
        <input name="mobile" class="t-input auto-fill" type="number" pattern="[0-9]*" placeholder="手机号">
        <input name="sex" class="t-input" type="text" placeholder="性别" style="">
        <input name="identity" class="t-input" type="text" placeholder="身份证" style="">
        <input name="birthday" class="t-input" type="text" placeholder="生日" style="">
        <input name="summary" class="t-input" type="text" placeholder="个人介绍" style="">
        <a href="javascript:;" class="submit-btn t-btn">申请</a>
    </div>
</div>
</body>

<script type="text/javascript" src="../public/js/jquery-2.1.4.js"></script>
<script type="text/javascript" src="../public/js/vue.min.js"></script>
<script type="text/javascript" src="../public/js/md5.js"></script>

<script type="text/javascript" src="../js/android.js"></script>
<script type="text/javascript" src="../js/api.js"></script>
<script type="text/javascript" src="../js/common/ue.js"></script>

<script type="text/javascript">
    jQuery(function($){
        if(document.referrer){
            $('div.goback').show();
        }
//        var uid = U.ajax.getUrlParam('uid') || 0;
//        U.api.user.info(uid, function(err, json){
//            alert(JSON.stringify(json));
//
//        });
        $('a.submit-btn').click(function(){
            var mobile = $('input[name="mobile"]').val();
            var data = {
                mobile: mobile,
                nick: $('input[name="nick"]').val(),
                sex: $('input[name="sex"]').val(),
                identity: $('input[name="identity"]').val(),
                birthday: $('input[name="birthday"]').val(),
                summary: $('input[name="summary"]').val()
            };
            //todo validate the data
            if(!Number(mobile) || mobile.length < 11){
                android.alert('手机号格式不合正确');
            }else{
                U.api.traveller.apply(data, function(err, json){
                    if(err){
                        android.alert(err.message);
                    }else{
                        android.alert('申请成功，等待审核');
                    }
                });
            }

        });
    })
</script>
</html>
